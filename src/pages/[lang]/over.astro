---
import Layout from '../../layouts/Layout.astro';
import { Image } from 'astro:assets';
// We'll use a placeholder for the "Robuuste ruimte" look
const industrialBg = "https://images.unsplash.com/photo-1550751827-4bd374c3f58b?auto=format&fit=crop&q=80&w=2600";
const makerSpace = "https://images.unsplash.com/photo-1581091226825-a6a2a5aee158?auto=format&fit=crop&q=80&w=1200";
import floorPlan from '../../assets/images/kaap-plattegrond.png';
import { getStaticPathsHelper } from '../../i18n/utils';

export function getStaticPaths() {
  return getStaticPathsHelper();
}

const { lang } = Astro.params;

const content = {
  nl: {
    hero: {
      label: "Innovatiepunt KAAP",
      title: "Bring your innovation to life.",
      subtitle: "De fysieke ruimte die je nodig hebt om een innovatief idee werkelijkheid te laten worden.",
      scroll: "Ontdek"
    },
    story: {
      title: "Het punt waar innovaties",
      title_suffix: "tot leven komen.",
      quote: "\"Van de tekentafel naar het dagelijkse leven.\"",
      p1: "Zeeland is pionier. Vernieuwend denken en ons creatief en technisch aanpassen aan elementen als water, energie en voedsel zit in ons DNA. Maar we denken niet alleen innovatief: we bieden de executiekracht om te maken, testen en ontwikkelen.",
      p2: "Op het uiterste puntje van de Kenniswerf in Vlissingen fungeert KAAP als een baken voor de regio. Een centrale locatie voor het ontwikkelen, testen en demonstreren waar innovaties op 'real scale' samenkomen.",
      p3: {
        title: "4000m² Test- & Ontwikkelplek",
        desc: "In de KAAP vind je unieke ruimtes waar overheid, bedrijfsleven en onderwijs samenwerken aan tastbare innovatie. Geen kantoorpand, maar een fysieke proeftuin voor opschaling:"
      },
      areas: ['Proefkeuken', 'Proefproductieruimte', 'Ontwikkel- & Demoruimte', 'Proeflokaal', 'Flexplekken & Kantoren'],
      floorplan_label: "Plattegrond Begane Grond",
      protein_transition: "Innovaties zijn de oplossingen die ons leven beter maken. En <strong>Food, Energy en Water</strong> zijn daarbij essentiële elementen en een spil in circulair denken."
    },
    values: {
        background_text: "Gedurfd",
        items: [
            {
                title: "Robuuste Ruimtes",
                desc: "Geen gepolijste vergaderzalen, maar stoere plekken waar gewerkt mag worden. Een levendige locatie die uitnodigt tot actie."
            },
            {
                title: "Afwijkende Aanpak",
                desc: "We doen het anders. We stimuleren samenwerkingen die je niet verwacht. Eigenzinnig, gedurfd en altijd gericht op resultaat."
            },
            {
                title: "Life Changing",
                desc: "Of jouw idee nu life changing of life saving is: het verdient de denkkracht en commitment van de Delta van de toekomst."
            }
        ]
    },
    cta: {
        title: "Delta van de",
        title_suffix: "Toekomst",
        btn: "Kom kijken"
    }
  },
  en: {
    hero: {
      label: "Innovatiepunt KAAP",
      title: "Bring your innovation to life.",
      subtitle: "The physical space you need to turn an innovative idea into reality.",
      scroll: "Discover"
    },
    story: {
      title: "The point where innovations",
      title_suffix: "come to life.",
      quote: "\"From the drawing board to daily life.\"",
      p1: "Zeeland is a pioneer. Innovative thinking and creatively and technically adapting to elements such as water, energy, and food is in our DNA. But we don't just think innovatively: we provide the execution power to make, test, and develop.",
      p2: "At the very tip of the Kenniswerf in Vlissingen, KAAP acts as a beacon for the region. A central location for development, testing, and demonstration where innovations converge on a 'real scale'.",
      p3: {
        title: "4000m² Test & Development Space",
        desc: "In KAAP, you will find unique spaces where government, business, and education collaborate on tangible innovation. Not an office building, but a physical playground for scaling:"
      },
      areas: ['Test Kitchen', 'Pilot Production Room', 'Development & Demo Space', 'Tasting Room', 'Flex Spots & Offices'],
      floorplan_label: "Ground Floor Plan",
      protein_transition: "Innovations are the solutions that make our lives better. And <strong>Food, Energy, and Water</strong> are essential elements and a pivot in circular thinking."
    },
    values: {
        background_text: "Bold",
        items: [
            {
                title: "Robust Spaces",
                desc: "No polished meeting rooms, but tough places where work can be done. A lively location that invites action."
            },
            {
                title: "Different Approach",
                desc: "We do it differently. We stimulate collaborations you don't expect. Quirkly, bold, and always results-oriented."
            },
            {
                title: "Life Changing",
                desc: "Whether your idea is life-changing or life-saving: it deserves the mental power and commitment of the Delta of the future."
            }
        ]
    },
    cta: {
        title: "Delta of the",
        title_suffix: "Future",
        btn: "Come and see"
    }
  }
};

const c = content[lang] || content.nl;
---

<Layout title={`${lang === 'nl' ? 'Over KAAP' : 'About KAAP'} | Bring your innovation to life`} lang={lang}>
  <!-- Hero: Pay-off -->
  <section class="relative min-h-[90vh] flex items-center bg-kaap-gray overflow-hidden">
    <div class="absolute inset-0 z-0">
        <div class="absolute inset-0 bg-kaap-gradient opacity-10 mix-blend-overlay"></div>
         <!-- Abstract 'Technisch' grid overlay -->
        <div class="absolute inset-0" style="background-image: radial-gradient(rgba(255,255,255,0.1) 1px, transparent 1px); background-size: 40px 40px;"></div>
        <img src={industrialBg} alt="KAAP Industrial" class="w-full h-full object-cover opacity-20 grayscale brightness-50" />
    </div>
    
    <div class="relative z-10 max-w-7xl mx-auto px-4 w-full">
        <div class="max-w-4xl">
            <span class="block text-kaap-pink font-bold tracking-[0.2em] uppercase mb-6 reveal">{c.hero.label}</span>
            <h1 class="text-6xl md:text-9xl font-bold font-heading text-white leading-none mb-8 reveal delay-100">
                {c.hero.title}
            </h1>
            <p class="text-2xl md:text-3xl text-gray-300 max-w-2xl leading-relaxed reveal delay-200 font-light border-l-4 border-kaap-purple pl-6">
                {c.hero.subtitle}
            </p>
        </div>
    </div>

    <!-- Scroll Indicator -->
    <div class="absolute bottom-10 right-10 text-white flex flex-col items-center gap-2 animate-bounce opacity-50">
        <span class="text-xs uppercase tracking-widest writing-vertical-lr">{c.hero.scroll}</span>
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path></svg>
    </div>
  </section>

  <!-- Brand Story: The Narrative -->
  <section class="py-32 bg-white relative">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="grid grid-cols-1 lg:grid-cols-12 gap-16 items-start">
            <!-- Left: The Bold Statement -->
            <div class="lg:col-span-5 sticky top-32 reveal">
                <h2 class="text-4xl md:text-6xl font-bold font-heading text-gray-900 leading-tight mb-8 kastlijntje">
                    {c.story.title} <span class="text-kaap-purple">{c.story.title_suffix}</span>
                </h2>
                <div class="w-20 h-2 bg-kaap-gradient mb-8"></div>
                <p class="text-gray-500 text-lg font-medium italic">
                    {c.story.quote}
                </p>
            </div>

            <!-- Right: The Content Flow -->
            <div class="lg:col-span-7 space-y-16 text-lg md:text-xl text-gray-700 leading-relaxed font-light">
                <div class="reveal delay-100">
                    <p class="mb-6">
                        {c.story.p1}
                    </p>
                </div>

                <div class="reveal delay-200 p-8 bg-gray-50 border-l-4 border-kaap-food rounded-r-2xl">
                    <p>
                        {c.story.p2}
                    </p>
                </div>

                <div class="reveal delay-300">
                    <h3 class="text-3xl font-bold font-heading text-gray-900 mb-6 kastlijntje">{c.story.p3.title}</h3>
                    <p class="mb-6">
                        {c.story.p3.desc}
                    </p>
                    <ul class="grid grid-cols-1 sm:grid-cols-2 gap-4 mt-8 mb-12">
                        {c.story.areas.map((item, index) => (
                             <li class="flex items-center space-x-3 text-gray-800 font-medium p-4 bg-gray-50 rounded-lg shadow-sm border border-gray-100 hover:border-kaap-purple transition-all hover:scale-105 cursor-default group map-hover-trigger" data-hover-target={`area-${index + 1}`}>
                                <span class="w-6 h-6 rounded-full bg-kaap-gray text-white flex items-center justify-center text-xs font-bold shadow-sm group-hover:bg-kaap-purple transition-colors">{index + 1}</span>
                                <span>{item}</span>
                            </li>
                        ))}
                    </ul>

                    <!-- Floor Plan Integration with SVG Overlay -->
                    <div class="relative rounded-2xl overflow-hidden shadow-2xl border border-gray-100 bg-gray-900 group">
                        <Image src={floorPlan} alt="KAAP Plattegrond" class="w-full h-auto object-cover opacity-90 transition-opacity duration-500" />
                        
                        <!-- Interactive Overlay -->
                        <svg class="absolute inset-0 w-full h-full z-10" viewBox="0 0 570 399" preserveAspectRatio="none">
                            <!-- 3. Ontwikkel- & Demoruimte (Entire Right Wing - 2000m2) -->
                            <path id="area-3" d="M340,0 L570,0 L570,399 L340,399 Z" class="map-area fill-kaap-energy opacity-0 transition-opacity duration-300 pointer-events-none" />

                            <!-- 1. Proefkeuken (Top Left) -->
                            <path id="area-1" d="M0,0 L340,0 L340,100 L0,100 Z" class="map-area fill-kaap-pink opacity-0 transition-opacity duration-300 pointer-events-none" />
                            
                            <!-- 2. Proefproductieruimte (Mid-Top Left) -->
                            <path id="area-2" d="M0,100 L340,100 L340,200 L0,200 Z" class="map-area fill-kaap-water opacity-0 transition-opacity duration-300 pointer-events-none" />
                            
                            <!-- 4. Proeflokaal (Mid-Bottom Left) -->
                            <path id="area-4" d="M0,200 L340,200 L340,300 L0,300 Z" class="map-area fill-kaap-food opacity-0 transition-opacity duration-300 pointer-events-none" />
                            
                            <!-- 5. Flexplekken & Kantoren (Bottom Left) -->
                            <path id="area-5" d="M0,300 L340,300 L340,399 L0,399 Z" class="map-area fill-kaap-purple opacity-0 transition-opacity duration-300 pointer-events-none" />
                        </svg>

                        <div class="absolute bottom-4 right-4 bg-white/10 backdrop-blur-md px-4 py-2 rounded-lg border border-white/20 text-xs text-white">
                            {c.story.floorplan_label}
                        </div>
                    </div>

                    <script>
                        // Simple Vanilla JS for Map Interaction
                        const triggers = document.querySelectorAll('.map-hover-trigger');
                        const areas = document.querySelectorAll('.map-area');

                        triggers.forEach(trigger => {
                            trigger.addEventListener('mouseenter', () => {
                                const targetId = trigger.getAttribute('data-hover-target');
                                const targetArea = document.getElementById(targetId);
                                if(targetArea) {
                                    targetArea.classList.remove('opacity-0');
                                    targetArea.classList.add('opacity-40');
                                }
                            });

                            trigger.addEventListener('mouseleave', () => {
                                const targetId = trigger.getAttribute('data-hover-target');
                                const targetArea = document.getElementById(targetId);
                                if(targetArea) {
                                    targetArea.classList.remove('opacity-40');
                                    targetArea.classList.add('opacity-0');
                                }
                            });
                        });
                    </script>
                </div>

                <div class="reveal delay-400">
                     <p set:html={c.story.protein_transition} />
                </div>
            </div>
        </div>
    </div>
  </section>

  <!-- Merkwaarden / Core Values (Robust) -->
  <section class="py-24 bg-kaap-gray text-white relative overflow-hidden">
     <!-- Massive Background Text -->
     <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full text-center pointer-events-none opacity-[0.03] overflow-hidden whitespace-nowrap">
        <span class="text-[20rem] font-bold font-heading uppercase text-outline">{c.values.background_text}</span>
     </div>

     <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            {c.values.items.map((item, index) => (
                <div class={`bg-white/5 backdrop-blur-sm p-10 border border-white/10 hover:bg-white/10 transition-colors group reveal delay-${index * 100}`}>
                    <h3 class={`text-2xl font-bold font-heading mb-4 ${index === 0 ? 'text-kaap-pink' : index === 1 ? 'text-kaap-purple' : 'text-kaap-energy'}`}>{item.title}</h3>
                    <p class="text-gray-400 leading-relaxed">
                        {item.desc}
                    </p>
                </div>
            ))}
        </div>
     </div>
  </section>

  <!-- Photo Section / Impression -->
  <section class="relative h-[60vh] md:h-[80vh] bg-fixed bg-center bg-cover flex items-center justify-center group" style={`background-image: url('${makerSpace}');`}>
      <div class="absolute inset-0 bg-black/60 group-hover:bg-black/40 transition-colors duration-700"></div>
      <div class="relative z-10 text-center max-w-4xl px-4 reveal">
          <h2 class="text-5xl md:text-8xl font-bold font-heading text-white mb-6 tracking-tighter">
            {c.cta.title} <span class="text-kaap-water">{c.cta.title_suffix}</span>
          </h2>
          <a href={`/${lang}/contact`} class="inline-block px-10 py-5 bg-white text-gray-900 font-bold text-xl rounded-full hover:scale-110 transition-transform shadow-[0_0_30px_rgba(255,255,255,0.3)]">
            {c.cta.btn}
          </a>
      </div>
  </section>
</Layout>

<style>
    .writing-vertical-lr {
        writing-mode: vertical-lr;
    }
    .text-outline {
        -webkit-text-stroke: 2px rgba(255,255,255,1);
        color: transparent;
    }
</style>
