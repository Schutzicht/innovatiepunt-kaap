---
import Layout from '../../layouts/Layout.astro';
import { vacancies } from '../../data/vacancies';

export async function getStaticPaths() {
  return vacancies.map(job => ({
    params: { slug: job.slug },
    props: { job },
  }));
}

const { job } = Astro.props;
---

<Layout title={`${job.title} | Werken bij KAAP`}>
  <!-- Hero / Cover -->
  <div class="relative h-[60vh] md:h-[70vh] bg-gray-900 overflow-hidden">
      <div class="absolute inset-0">
          <img src={job.image} alt={job.title} class="w-full h-full object-cover opacity-50" />
          <div class="absolute inset-0 bg-gradient-to-t from-gray-900 via-gray-900/40 to-transparent"></div>
      </div>
      
      <div class="absolute bottom-0 left-0 w-full p-8 md:p-16 pb-12 z-10 max-w-7xl mx-auto">
           <div class="reveal">
                <div class="flex flex-wrap gap-4 mb-6">
                    <span class="px-4 py-1.5 rounded-full bg-kaap-pink text-white text-sm font-bold uppercase tracking-wider shadow-lg">{job.department}</span>
                    <span class="px-4 py-1.5 rounded-full bg-white/20 backdrop-blur-md text-white border border-white/20 text-sm font-bold shadow-lg">{job.fte}</span>
                </div>
                <h1 class="text-5xl md:text-7xl font-bold font-heading text-white leading-tight mb-4">{job.title}</h1>
                <p class="text-xl md:text-2xl text-gray-300 max-w-3xl font-light">{job.subtitle}</p>
           </div>
      </div>
  </div>

  <!-- Content Grid -->
  <section class="bg-white min-h-screen">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 md:py-24">
          <div class="grid grid-cols-1 lg:grid-cols-12 gap-16">
              
              <!-- Main Content -->
              <div class="lg:col-span-8 space-y-16">
                  <!-- Intro -->
                  <div class="prose prose-lg prose-gray max-w-none reveal delay-100">
                      <p class="text-2xl font-light leading-relaxed text-gray-800 whitespace-pre-line">
                          {job.content.intro}
                      </p>
                  </div>

                  <hr class="border-gray-100" />

                  <!-- Responsibilities -->
                  <div class="reveal delay-200">
                      <h3 class="text-3xl font-bold text-gray-900 mb-8 flex items-center">
                          Wat ga je doen?
                      </h3>
                      <ul class="space-y-4">
                          {job.content.responsibilities.map(item => (
                              <li class="flex items-start">
                                  <svg class="w-6 h-6 text-kaap-water mt-1 mr-4 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                                  <span class="text-lg text-gray-700 leading-relaxed">{item}</span>
                              </li>
                          ))}
                      </ul>
                  </div>

                  <!-- Offer -->
                  <div class="bg-gray-50 p-10 rounded-3xl border border-gray-100 reveal delay-300">
                       <h3 class="text-3xl font-bold text-gray-900 mb-8 flex items-center">
                          Wat bieden wij?
                      </h3>
                       <ul class="space-y-4">
                          {job.content.offer.map(item => (
                              <li class="flex items-start">
                                  <svg class="w-6 h-6 text-kaap-pink mt-1 mr-4 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                                  <span class="text-lg text-gray-700 leading-relaxed">{item}</span>
                              </li>
                          ))}
                      </ul>
                  </div>

                  <!-- Requirements -->
                   <div class="reveal delay-400">
                      <h3 class="text-3xl font-bold text-gray-900 mb-8 flex items-center">
                          Wie ben jij?
                      </h3>
                      <ul class="space-y-4">
                          {job.content.requirements.map(item => (
                              <li class="flex items-start">
                                  <svg class="w-6 h-6 text-kaap-purple mt-1 mr-4 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                                  <span class="text-lg text-gray-700 leading-relaxed">{item}</span>
                              </li>
                          ))}
                      </ul>
                  </div>
              </div>

              <!-- Sidebar -->
              <div class="lg:col-span-4 relative">
                  <div class="sticky top-32 p-8 rounded-3xl bg-white shadow-2xl border border-gray-100 reveal delay-500">
                      <h3 class="text-2xl font-bold text-gray-900 mb-6">Interesse?</h3>
                      <p class="text-gray-500 mb-8 leading-relaxed">
                          Ben jij de {job.title} die wij zoeken? Wacht dan niet en laat van je horen.
                      </p>
                      
                      <div class="space-y-6">
                           <a href={`mailto:info@innovatiepuntkaap.nl?subject=Sollicitatie%20${job.title}`} class="block w-full py-4 bg-kaap-gradient text-white text-center rounded-xl font-bold text-lg hover:shadow-lg hover:scale-[1.02] transition-all transform animate-pulse-slow">
                              Solliciteer direct
                          </a>
                          <div class="text-center">
                              <span class="text-sm text-gray-400 block mb-2">Of bel ons eerst even</span>
                              <a href="tel:0612345678" class="text-kaap-purple font-bold hover:underline">06 1234 5678</a>
                          </div>
                      </div>

                      <hr class="my-8 border-gray-100" />

                      <div class="flex items-center gap-4">
                          <div class="w-12 h-12 rounded-full overflow-hidden bg-gray-200">
                              <!-- Placeholder for recruiter/team lead avatar -->
                              <div class="w-full h-full bg-kaap-gray flex items-center justify-center text-white font-bold text-xs">TEAM</div>
                          </div>
                          <div>
                              <p class="text-sm font-bold text-gray-900">Team KAAP</p>
                              <p class="text-xs text-gray-400">Wij kijken uit naar je bericht!</p>
                          </div>
                      </div>
                  </div>
              </div>

          </div>
      </div>
  </section>
</Layout>

<style>
    /* Custom slow pulse for the button */
    @keyframes pulse-slow {
        0%, 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(76, 29, 149, 0.4); } // kaap-purple-ish
        50% { transform: scale(1.02); box-shadow: 0 10px 25px -5px rgba(76, 29, 149, 0.4); }
    }
    .animate-pulse-slow {
        animation: pulse-slow 3s infinite;
    }
</style>
